<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/plugins/bootstrap-grid.css">
    <link rel="stylesheet" href="/css/plugins/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>200x.com.br | Biblioteca</title>
</head>

<body>
    <div class="mil-wrapper" id="top">
        <div class="mil-menu-frame">
            <div class="mil-frame-top">
                <a href="/" class="mil-logo">200x</a>
                <div class="mil-menu-btn">
                    <span></span>
                </div>
            </div>
            <div class="container">
                <div class="mil-menu-content">
                    <div class="row">
                        <div class="col-xl-5">
                            <nav class="mil-main-menu" id="swupMenu">
                                <ul>
                                    <li class="mil-has-children">
                                        <a href="/">Início</a>
                                    </li>
                                    <li class="mil-has-children mil-active">
                                        <a href="/biblioteca.html">Biblioteca</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mil-curtain"></div>

        <div class="mil-frame">
            <div class="mil-frame-top">
                <a href="/" class="mil-logo">200x</a>
                <div class="mil-menu-btn">
                    <span></span>
                </div>
            </div>
            <div class="mil-frame-bottom">
                <div class="mil-current-page"></div>
                <div class="mil-back-to-top">
                    <a href="#top" class="mil-link mil-dark mil-arrow-place">
                        <span>Voltar ao topo</span>
                    </a>
                </div>
            </div>
        </div>

        <div class="mil-content">
            <main id="swupMain" class="mil-main-transition">
                <section class="mil-dark-bg">
                    <div class="container mil-p-120-90">
                        <div class="row">
                            <div class="col-lg-12">
                                <span class="mil-suptitle mil-mb-30">Biblioteca</span>
                                <h1 class="mil-mb-30">Livros de referência</h1>
                                <p class="mil-mb-60">Bem-vindo à <b>Biblioteca de Livros de Referência do 200x</b>, um espaço dedicado à sua evolução no universo das finanças.<br>
      Aqui reunimos recomendações de obras essenciais que ajudam tanto iniciantes quanto profissionais a ampliar o conhecimento sobre educação financeira, investimentos, gestão de patrimônio e tomada de decisões econômicas inteligentes.
      <br>Acreditamos que a leitura é uma ferramenta poderosa para desenvolver uma compreensão sólida dos conceitos que regem o mundo financeiro. Por isso, nossa biblioteca seleciona materiais de referência confiáveis e relevantes, pensados para apoiar sua trajetória de aprendizado e potencializar sua capacidade de agir com mais segurança e estratégia em sua vida financeira.</p>
                                <p class="mil-mb-60">Explore nossas sugestões e dê os próximos passos rumo a uma jornada de aprendizado contínuo — porque investir em conhecimento é o primeiro passo para alcançar seus objetivos financeiros.</p>
                            </div>
                        </div>

                        <div id="books-list" class="row mil-services-grid m-0" aria-live="polite"></div>

                        <div id="books-error" style="display:none;">
                            Não foi possível carregar os livros no momento.
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="/js/plugins/jquery.min.js"></script>
    <script>
          const listElement = document.getElementById('books-list');
  const errorElement = document.getElementById('books-error');

  function createBookCard(book) {
    const col = document.createElement('div');
    col.className = 'col-md-6 col-lg-4 mil-services-grid-item p-0';

    const card = document.createElement('article');
    card.className = 'mil-service-card-sm mil-book-card';

    const image = document.createElement('img');
    image.className = 'mil-book-cover mil-mb-20';
    image.src = book.imagem;
    image.alt = `Capa do livro ${book.titulo}`;
    image.loading = 'lazy';

    const category = document.createElement('p');
    category.className = '';
    category.textContent = book.categoria;

    const title = document.createElement('h5');
    title.className = '';
    title.textContent = book.titulo;

    const author = document.createElement('p');
    author.className = 'mil-mb-15';
    author.textContent = book.autor;

    const link = document.createElement('a');
    link.className = 'mil-link mil-arrow-place';
    link.href = book.link;
    const isExternalLink = /^https?:\/\//i.test(book.link);
    if (isExternalLink) {
      link.target = '_blank';
      link.rel = 'noopener noreferrer';
    }
    link.textContent = 'Ver resumo';

    card.appendChild(image);
    card.appendChild(category);
    card.appendChild(title);
    card.appendChild(author);
    card.appendChild(link);

    col.appendChild(card);
    return col;
  }

  async function loadBooks() {
    try {
      const response = await fetch('/data/livros-referencia.json', { cache: 'no-store' });

      if (!response.ok) {
        throw new Error(`Erro ao carregar JSON: ${response.status}`);
      }

      const books = await response.json();
      const fragment = document.createDocumentFragment();

      books.forEach((book) => {
        fragment.appendChild(createBookCard(book));
      });

      listElement.innerHTML = '';
      listElement.appendChild(fragment);
    } catch (error) {
      console.error(error);
      errorElement.style.display = 'block';
    }
  }

  loadBooks();
    </script>
</body>

</html>
